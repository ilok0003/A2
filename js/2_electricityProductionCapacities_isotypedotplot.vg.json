{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": {
        "text": "Electric Production Capacity from Renewable Sources",
        "fontSize": 16,
        "subtitle": " ",
        "align": "right",
        "dx":-25
      },
    "config": {
        "view": {"stroke": ""},
        "padding":{"left": 10, "top": 10, "right": 10, "bottom": 10}
    },
    "width": 650,
    "height": 300,
    "data": {
      "url": "https://raw.githubusercontent.com/lllkl12/FIT3179_Submission/main/asgn2/data/electricity_production_capacities_for_renewables_and_wastes_processed_isotype.csv"
    },
    "params":[
        {
          "name":"country_selection",
          "bind":{
            "input": "select",
            "options": [
              null,
              "Belgium",
              "Bulgaria",
              "Czechia",
              "Denmark",
              "Germany",
              "Estonia",
              "Ireland",
              "Greece",
              "Spain",
              "France",
              "Croatia",
              "Italy",
              "Cyprus",
              "Latvia",
              "Lithuania",
              "Luxembourg",
              "Hungary",
              "Malta",
              "Netherlands",
              "Austria",
              "Poland",
              "Portugal",
              "Romania",
              "Slovenia",
              "Slovakia",
              "Finland",
              "Sweden"
            ],
            "labels": [
              "European Union",
              "Belgium",
              "Bulgaria",
              "Czechia",
              "Denmark",
              "Germany",
              "Estonia",
              "Ireland",
              "Greece",
              "Spain",
              "France",
              "Croatia",
              "Italy",
              "Cyprus",
              "Latvia",
              "Lithuania",
              "Luxembourg",
              "Hungary",
              "Malta",
              "Netherlands",
              "Austria",
              "Poland",
              "Portugal",
              "Romania",
              "Slovenia",
              "Slovakia",
              "Finland",
              "Sweden"
            ],
            "name": "Country selection: "
          }
        },
        {
            "name": "year_selection",
            "value": 2020,
            "bind":{
                "input": "range",
                "min": 2011,
                "max": 2020,
                "step": 1,
                "name": "Year selection : "
            }
        }

      ],
    "transform": [
      {
        "calculate": "{'Hydro': 'üåä', 'Wind': 'üí®', 'Solar': '‚òÄÔ∏è', 'Solid Biofuels':'‚õΩ'}[datum.SIEC]",
        "as": "emoji"
      },
      {"filter":"datum.TIME==year_selection"},
      {"filter":"country_selection == null || datum.GEO == country_selection"},
      {"filter":"country_selection != null || datum.GEO ==  'European Union - 27 countries (from 2020)'"}
    ],
    
    "encoding": {
      "x": {"field": "rank", "type": "quantitative", "scale": {"domain": [0,19]}, "axis":null},
      "y": {"field": "SIEC", "type": "nominal", "sort": null, "axis":{
        "offset":30,
        "title":null,
        "labelFontSize":12
      }},
      "text": {"field": "emoji", "type": "nominal"},
      "size": {"value": 25},
      "tooltip":[
        {"field": "GEO", "type": "nominal", "title": "Country"},
        {"field": "SIEC", "type": "nominal", "title": "Renewable Source"},
        {"field":"Value", "type":"quantitative", "title":"Maximum Electrical Capacity (Megawatt)", "format":",.0f"}
      ]
    }, 
    "layer": [
        {
            "mark": {"type": "text", "baseline": "middle"}
        }
    ]
  }
  