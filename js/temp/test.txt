"European Union - 27 countries (from 2020)",
"Belgium",
"Bulgaria",
"Czechia",
"Denmark",
"Germany",
"Estonia",
"Ireland",
"Greece",
"Spain",
"France",
"Croatia",
"Italy",
"Cyprus",
"Latvia",
"Lithuania",
"Luxembourg",
"Hungary",
"Malta",
"Netherlands",
"Austria",
"Poland",
"Portugal",
"Romania",
"Slovenia",
"Slovakia",
"Finland",
"Sweden",
"United Kingdom"


4 - slope chart text layer
,
          {
            "transform": [
              {
                "aggregate": [{"op": "sum", "field": "Value", "as": "Sum"}],
                "groupby": ["SIEC"]
              },
              {"calculate": "datum.Sum - datum.Value", "as": "diff"}
            ],
            "mark":{
              "type":"text",
              "align": "left",
              "baseline": "middle",
              "dx": 30,
              "dy": 10,
              "fontSize": 11,
              "fontStyle":"italic"
            },
            
            "encoding": {
              "text":{"field":"diff",  "type":"quantitative", "format": ".0f"},
              "color":{"value":"black"}
            }
          }


7. original tooltip

,
        "tooltip":[
          {"field": "GEO", "type": "nominal", "title": "Country"},
          {"field": "SIEC", "type": "nominal", "title": "Energy Type"},
          {"field": "Value", "type": "quantitative", "title": "Production Capacity (Terajoule)", "format":",.0f"}
        ]